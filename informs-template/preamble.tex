%% ==========================================================================
%% preamble.tex - Packages for INFORMS papers
%% ==========================================================================
%% Include with: \input{preamble.tex}
%% For TikZ figures, also include: \input{tikz/setup.tex}
%%
%% The informs4.cls already provides:
%%   Math      : amsmath, amssymb, amsfonts, bm, theorem
%%   Fonts     : tgtermes, newtxtext, newtxmath, fix-cm, anyfontsize
%%   Bib       : natbib
%%   Hyperlinks: hyperref (colored links), bookmark
%%   Layout    : graphicx, xcolor, array, url, ifthen
%%   Misc      : endnotes
%%   Theorems  : theorem, lemma, proposition, corollary, claim,
%%               conjecture, hypothesis, assumption, remark, example,
%%               problem, definition, question, answer, exercise
%%   Operators : \argmin, \argmax
%% ==========================================================================

%% ------------------------------------------
%% Math
%% ------------------------------------------
% \usepackage{amsmath,amssymb,amsfonts}       % --- provided by informs4.cls
% \usepackage{amsthm}                         % --- provided by informs4.cls (theorem)
\usepackage{mathtools}          % extends amsmath (dcases, coloneqq, etc.)
% \usepackage{mathrsfs}         % conflicts with newtx fonts; use \mathcal
% \usepackage{bm}                             % --- provided by informs4.cls

%% ------------------------------------------
%% Graphics and color
%% ------------------------------------------
% \usepackage{graphicx}                       % --- provided by informs4.cls
% \usepackage{xcolor}                         % --- provided by informs4.cls

%% ------------------------------------------
%% Typography
%% ------------------------------------------
\usepackage{microtype}          % better typography (kerning, spacing)
% \usepackage[english]{babel}   % not needed: informs4.cls handles hyphenation
% \usepackage{setspace}         % not needed: informs4.cls controls spacing

%% ------------------------------------------
%% Tables
%% ------------------------------------------
\usepackage{booktabs}           % professional tables (\toprule, \midrule, \bottomrule)
\usepackage{multirow}           % multi-row cells in tables
% \usepackage{array}                          % --- provided by informs4.cls
% \usepackage{threeparttable}   % tables with footnotes
% \usepackage{longtable}        % multi-page tables
% \usepackage{diagbox}          % diagonal boxes in table headers

%% ------------------------------------------
%% Figures
%% ------------------------------------------
\usepackage{caption}
\captionsetup{
  justification=raggedright,
  singlelinecheck=false
}
\usepackage{subcaption}         % subfigures (\begin{subfigure})

%% ------------------------------------------
%% Algorithms (choose one pair, comment out the other)
%% ------------------------------------------
\usepackage{algorithm}
\usepackage{algpseudocode}      % algorithmicx style
% \usepackage[ruled,vlined]{algorithm2e} % alternative style

%% ------------------------------------------
%% Lists
%% ------------------------------------------
\usepackage{enumitem}           % customizable lists (label=, nosep, etc.)

%% ------------------------------------------
%% Document structure
%% ------------------------------------------
% \usepackage{subfiles}         % not needed: INFORMS uses single-file submission
% \usepackage[toc,page,title,titletoc]{appendix} % INFORMS has its own appendix handling

%% ------------------------------------------
%% Authors
%% ------------------------------------------
% \usepackage{authblk}          % not needed: informs4.cls has its own author macros

%% ------------------------------------------
%% Hyperlinks (load near end - redefines many commands)
%% ------------------------------------------
% --- All provided by informs4.cls: url, hyperref, bookmark

%% ------------------------------------------
%% Bibliography
%% ------------------------------------------
% \usepackage{natbib}                         % --- provided by informs4.cls

%% ==========================================================================
%% Theorem environments
%% ==========================================================================
% --- All provided by informs4.cls:
%     theorem, lemma, proposition, corollary, claim, conjecture,
%     hypothesis, assumption, remark, example, problem, definition,
%     question, answer, exercise (+ repeat* variants for appendix)

%% ==========================================================================
%% Numbering
%% ==========================================================================
% --- Handled by informs4.cls (equation, table, figure numbering)

%% ==========================================================================
%% Common math macros
%% ==========================================================================

%%% Number sets
\newcommand{\R}{\mathbb{R}}     % real numbers
\newcommand{\Z}{\mathbb{Z}}     % integers
\newcommand{\N}{\mathbb{N}}     % natural numbers
\newcommand{\Q}{\mathbb{Q}}     % rationals
\newcommand{\C}{\mathbb{C}}     % complex numbers

%%% Probability and expectation
\newcommand{\E}{\mathbb{E}}     % expectation
\newcommand{\Var}{\mathrm{Var}} % variance
\newcommand{\Cov}{\mathrm{Cov}} % covariance
\newcommand{\pr}{\mathbb{P}}    % probability
\newcommand{\ind}[1]{\mathbf{1}_{\{#1\}}} % indicator function

%%% Common operators
% \argmin, \argmax                            % --- provided by informs4.cls

%%% Brackets and norms
\newcommand{\abs}[1]{\left|#1\right|}           % absolute value
\newcommand{\norm}[1]{\left\|#1\right\|}        % norm
\newcommand{\inner}[2]{\langle#1,#2\rangle}     % inner product
\newcommand{\floor}[1]{\lfloor#1\rfloor}        % floor
\newcommand{\ceil}[1]{\lceil#1\rceil}           % ceiling
\newcommand{\pos}[1]{\left[#1\right]^+}         % positive part

%%% Convergence
\newcommand{\dto}{\Rightarrow}                  % convergence in distribution
\newcommand{\pto}{\xrightarrow{p}}              % convergence in probability
\newcommand{\asto}{\xrightarrow{a.s.}}          % almost sure convergence

%% ==========================================================================
%% Track changes (must resolve before final version)
%% ==========================================================================
\usepackage[normalem]{ulem}
\definecolor{tc-del}{RGB}{180, 40, 40}    % muted red
\definecolor{tc-ins}{RGB}{0, 90, 160}     % steel blue
\definecolor{tc-cmt}{RGB}{0, 120, 100}    % teal
\newcommand{\replace}[2]{\textcolor{tc-del}{\sout{#1}} \textcolor{tc-ins}{{#2}}}
\newcommand{\delete}[1]{\textcolor{tc-del}{\sout{#1}}}
\newcommand{\ins}[1]{\textcolor{tc-ins}{{#1}}}
\newcommand{\cmt}[2]{\textcolor{tc-cmt}{({#1}: {#2})}}
